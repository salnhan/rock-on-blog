<!DOCTYPE html>

<html lang="en">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Common CKAN administrator tasks | Rockon Blogs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="The majority of common CKAN administration tasks are carried out using the paster script. Paster is run on the command line on the server running CKAN. This section covers common tasks using paster Ac">
<meta name="keywords" content="ckan,cli,paster">
<meta property="og:type" content="article">
<meta property="og:title" content="Common CKAN administrator tasks">
<meta property="og:url" content="https://salnhan.github.io/2018/11/18/ckan-common-tasks/index.html">
<meta property="og:site_name" content="Rockon Blogs">
<meta property="og:description" content="The majority of common CKAN administration tasks are carried out using the paster script. Paster is run on the command line on the server running CKAN. This section covers common tasks using paster Ac">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-06-18T21:15:44.072Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Common CKAN administrator tasks">
<meta name="twitter:description" content="The majority of common CKAN administration tasks are carried out using the paster script. Paster is run on the command line on the server running CKAN. This section covers common tasks using paster Ac">
  
    <link rel="alternate" href="/rockon-blog/atom.xml" title="Rockon Blogs" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <!-- Bootstrap core CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
  <!-- Plugins CSS -->
  <link rel="stylesheet" href="/rockon-blog/css/fontawesome.min.css">
  <link rel="stylesheet" href="/rockon-blog/css/styles.css">
  <link rel="stylesheet" href="/rockon-blog/css/breakpoints.css">
  <link rel="stylesheet" href="/rockon-blog/css/highlight.css">

  <!-- Custom fonts for this template -->
  <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:100,200,300,400,500,600,700,800,900" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:100,200,300,400,500,600,700,800,900" rel="stylesheet">
</head>


  <!-- use specific layout for about page -->
  
  <body class="bg-dark">
    <!-- navigation -->

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
  <a class="navbar-brand d-lg-none" href="#">Rockon Blogs</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
       
          <li class="nav-item ">
            <a class="nav-link" href="/rockon-blog/">Home</a>
          </li>
        
          <li class="nav-item ">
            <a class="nav-link" href="/rockon-blog/archives/">Archives</a>
          </li>
        
        <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Categories</a>
        <div class="dropdown-menu">
          
            <a class="dropdown-item" href="/rockon-blog/categories/ckan/">ckan</a>
          
            <a class="dropdown-item" href="/rockon-blog/categories/hexo/">hexo</a>
          
            <a class="dropdown-item" href="/rockon-blog/categories/frontend/">frontend</a>
          
            <a class="dropdown-item" href="/rockon-blog/categories/infrastructure/">infrastructure</a>
          
        </div>
      </li>
    </ul>
    <a class="navbar-brand d-none d-lg-flex" href="index.html">Rockon Blogs</a>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
          <a class="nav-link" href="https://github.com/salnhan/rock-on-blog" title="Github''> <i class=" fab fa-github"></a>
      </li>
      <li class="nav-item">
       </li><li class="nav-item">
          <a class="nav-link" href="mailto:mascit10@gmail.com" title="Contact"> <i class="far fa-envelope"></i></a>
        </li>
      <li class="nav-item">
        <a class="nav-link" href title="facebook"> <i class="fab fa-facebook-f"></i></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/rockon-blog/atom.xml" title="rss_feed">
        <span><i class="fas fa-rss"></i></span></a>
      </li>
    </ul>
  </div><!-- /.navbar-collapse -->
  </div>
</nav>

    <!-- end navigation -->

    <!-- main -->
    <div class="container main-wrapper mx-auto">
      <hr class="hr-nav">
      <div class="row">
        <div class="col-lg-9 col-md-12 mx-auto">
          <section id="main">
<div class="col">

  <div class="card mb-4 box-shadow" itemscope itemprop="blogPost">
    <div class="card-header article-header">
      <div class="d-flex justify-content-between align-items-center">
        <div class="article-title" itemprop="name">Common CKAN administrator tasks</div>
        <a href="/rockon-blog/2018/11/18/ckan-common-tasks/" class="btn btn-info article-date">
  <time datetime="2018-11-18T13:20:32.000Z" itemprop="datePublished">18.11.2018</time>
</a>
      </div>
    </div>
    <div class="article-preview--body" itemprop="articleBody">
      
          <p>The majority of common CKAN administration tasks are carried out using the <strong>paster</strong> script.</p>
<p>Paster is run on the command line on the server running CKAN. This section covers <em>common tasks using paster</em></p>
<h4 id="Activating-of-VirtualEnv"><a href="#Activating-of-VirtualEnv" class="headerlink" title="Activating of VirtualEnv"></a>Activating of VirtualEnv</h4><p>Before excuting paster script, must the <strong>VirtualEnv</strong> be activated</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># activate VirtualEnv</span></span><br><span class="line">. /usr/lib/ckan/default/bin/activate</span><br></pre></td></tr></table></figure>

<p>For the full list of tasks supported by paster, you can run:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paster --plugin=ckan --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<h4 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Before running CKAN for the first time,</span></span><br><span class="line"><span class="comment"># run db init to create the tables in the database and the default authorization settings</span></span><br><span class="line">paster --plugin=ckan db init -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># delete everything in the database, including the tables, to start from scratch</span></span><br><span class="line">paster --plugin=ckan db clean -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># upgrade migration</span></span><br><span class="line">paster --plugin=ckan db upgrade -c /etc/ckan/production.ini</span><br></pre></td></tr></table></figure>

<h4 id="User-Create-and-manage-users"><a href="#User-Create-and-manage-users" class="headerlink" title="User - Create and manage users"></a>User - Create and manage users</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create user</span></span><br><span class="line">paster --plugin=ckan user add admin -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># Give sysadmin rights</span></span><br><span class="line">paster --plugin=ckan sysadmin add admin -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># delete user</span></span><br><span class="line">paster --plugin=ckan user remove admin -c /etc/ckan/production.ini</span><br></pre></td></tr></table></figure>

<h4 id="Rebuild-search-index"><a href="#Rebuild-search-index" class="headerlink" title="Rebuild search index"></a>Rebuild search index</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># reindex all datasets</span></span><br><span class="line">paster --plugin=ckan search-index rebuild -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># reindex only one dataset dataset_name</span></span><br><span class="line">paster --plugin=ckan search-index rebuild dataset-name -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># reindex only datasets, which are not already indexed</span></span><br><span class="line">paster --plugin=ckan search-index rebuild -o -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># don’t rebuild the whole index, but just refresh it</span></span><br><span class="line">paster --plugin=ckan search-index rebuild -r -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># checks for datasets not indexed</span></span><br><span class="line">paster --plugin=ckan search-index check -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># shows index of a dataset</span></span><br><span class="line">paster --plugin=ckan search-index show &lt;dataset_name&gt; -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># clears the search index for the provided dataset or for the whole ckan instance</span></span><br><span class="line">paster --plugin=ckan search-index clear [dataset_name] -c /etc/ckan/production.ini</span><br></pre></td></tr></table></figure>

<h4 id="Harvester"><a href="#Harvester" class="headerlink" title="Harvester"></a>Harvester</h4><p>Harvest sources must be created via web interface</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shows all harvest source with source id</span></span><br><span class="line">paster --plugin=ckanext-harvest harvester sources -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># create harvest job for an harvest source</span></span><br><span class="line">paster --plugin=ckanext-harvest harvester job &#123;source_id&#125; -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment">## remove all datasets and harvest jobs a harvest source</span></span><br><span class="line">paster --plugin=ckanext-harvest harvester clearsource &#123;source_id&#125; -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove a harvest source</span></span><br><span class="line">paster --plugin=ckanext-harvest harvester rmsource &#123;source_id&#125; -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># excutes harvest jobs - harvesting</span></span><br><span class="line">paster --plugin=ckanext-harvest harvester run -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># gather data from harvest jobs</span></span><br><span class="line">paster --plugin=ckanext-harvest harvester gather_consumer -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># Running after gather_consumer</span></span><br><span class="line"><span class="comment"># fetch and insert data from gather_consumer to database</span></span><br><span class="line">paster --plugin=ckanext-harvest harvester fetch_consumer -c /etc/ckan/production.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># cleans queue of gather_consumer and fetch_consumer</span></span><br><span class="line">paster --plugin=ckanext-harvest harvester purge_queues -c /etc/ckan/production.ini</span><br></pre></td></tr></table></figure>

<p><strong><em>Links</em></strong></p>
<ul>
<li><a href="https://docs.ckan.org/en/ckan-1.7.4/paster.html" target="_blank" rel="noopener">CKAN Documentation</a></li>
</ul>

      
    </div>
    <hr>

      <div class="article-preview--footer">
        <i class="fas fa-tags"></i>

  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/rockon-blog/tags/ckan/">ckan</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/rockon-blog/tags/cli/">cli</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/rockon-blog/tags/paster/">paster</a></li></ul>

        
  <div class="article-category">
  	<i class="fas fa-folder-open"></i>
    <a class="article-category-link" href="/rockon-blog/categories/ckan/">ckan</a>
  </div>

      </div>

  </div>
</div>
</section>
        </div>
        <div class="col-lg-3 mx-auto main-sidebar">
           
            <aside id="sidebar">
  
    
<div class="card main-sidebar--widget">
  <div class="card-header main-sidebar--widget-header">Recent Posts</div>
  <ul class="list-group list-group-flush">
    
      <li class="list-group-item">
        <a href="/rockon-blog/2019/05/30/redirect-to-503-page-with-nginx/">Redirect to maintenance page with nginx</a>
      </li>
    
      <li class="list-group-item">
        <a href="/rockon-blog/2018/11/18/ckan-common-tasks/">Common CKAN administrator tasks</a>
      </li>
    
      <li class="list-group-item">
        <a href="/rockon-blog/2018/09/04/work-with-gulp/">Working with Gulp</a>
      </li>
    
      <li class="list-group-item">
        <a href="/rockon-blog/2018/08/05/useful-docker-commands/">Useful docker commands</a>
      </li>
    
      <li class="list-group-item">
        <a href="/rockon-blog/2018/03/05/manage-frontend-frameworks-with-bower/">Using bower</a>
      </li>
    
  </ul>

</div>

  
    
	
	<div class="card main-sidebar--widget">
	  <div class="card-header main-sidebar--widget-header">Archives</div>
	  <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/rockon-blog/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/rockon-blog/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/rockon-blog/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/rockon-blog/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/rockon-blog/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/rockon-blog/archives/2018/02/">February 2018</a></li></ul>
	</div>
	



  
</aside>
          
        </div>
      </div>

      <!-- footer -->
      <footer class="container footer">
  <hr class="hr-nav">
  
  <div class="d-flex justify-content-between align-items-center">
  	<div class="footer-copyright">
      &copy; 2019 salnhan (MT Nhan)
	</div>
	<div class="footer-themes">
      Themes <a href="https://github.com/salnhan/hexo-theme-rockon-blog" target="_blank">rockon-blogs</a>
	</div>
	<div class="footer-hexo">
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
  	</div>
  </div>
</footer>

      <! -- insert javascripts -->
      
<script></script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>


  <link rel="stylesheet" href="/rockon-blog/fancybox/jquery.fancybox.css">
  <script src="/rockon-blog/fancybox/jquery.fancybox.pack.js"></script>






    </div>
    <!-- end main -->
  </body>
</html>
